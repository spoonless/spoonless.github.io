

<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8">
  <meta content="David Gayerie" name="author" />
<meta content="Tutoriel three.js" name="description" />
<meta content="three.js, webgl, 3D" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Animation à partir de courbes &mdash; Documentation Le JavaScript moderne </title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom_rtd_theme.css" type="text/css" />

  
  
  
  
    <link rel="canonical" href="https://gayerie.dev/docs/js/threejs/animation_curve.html"/>
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="prev" title="Chargement de modèle" href="chargement_scene.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Le JavaScript moderne
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Recherche dans les pages" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">JavaScript (notions avancées)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../javascript/evolution_syntaxe.html">Les évolutions de la syntaxe depuis ES5</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javascript/evolution_syntaxe.html#le-mode-strict-es5">Le mode strict (ES5)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/evolution_syntaxe.html#declarer-une-variable-avec-let-et-const-es6">Déclarer une variable avec let et const (ES6)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/evolution_syntaxe.html#la-structure-for-of-es6">La structure for … of (ES6)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/evolution_syntaxe.html#gabarit-de-chaine-de-caracteres-es6">Gabarit de chaîne de caractères (ES6)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/evolution_syntaxe.html#valeur-par-defaut-des-parametres-es6">Valeur par défaut des paramètres (ES6)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/evolution_syntaxe.html#le-parametre-de-reste-es6">Le paramètre de reste (ES6)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/evolution_syntaxe.html#la-decomposition-de-tableau-es6">La décomposition de tableau (ES6)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/evolution_syntaxe.html#l-affectation-de-tableau-par-decomposition-es6">L’affectation de tableau par décomposition (ES6)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/evolution_syntaxe.html#l-affectation-d-objet-par-decomposition-es6">L’affectation d’objet par décomposition (ES6)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/evolution_syntaxe.html#l-operateur-d-exponentiation-es7">L’opérateur d’exponentiation (ES7)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/evolution_syntaxe.html#programmation-asynchrone-avec-async-et-await-es7">Programmation asynchrone avec async et await (ES7)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/evolution_syntaxe.html#operateur-de-coalescence-des-valeurs-nulles-es11">Opérateur de coalescence des valeurs nulles (ES11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/evolution_syntaxe.html#chainage-optionnel-es11">Chaînage optionnel (ES11)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/modele_objet.html">Le modèle objet</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javascript/modele_objet.html#creer-des-objets">Créer des objets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../javascript/modele_objet.html#la-declaration-litterale">La déclaration littérale</a></li>
<li class="toctree-l3"><a class="reference internal" href="../javascript/modele_objet.html#le-constructeur">Le constructeur</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/modele_objet.html#le-prototype">Le prototype</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/modele_objet.html#la-notion-de-propriete">La notion de propriété</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/modele_objet.html#l-heritage">L’héritage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/modele_objet.html#la-notion-de-classe-depuis-es6">La notion de classe depuis ES6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/modele_objet.html#l-heritage-avec-les-classes">L’héritage avec les classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/modele_objet.html#utilisation-du-mot-cle-super">Utilisation du mot-clé super</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/fonctionnel.html">Programmation fonctionnelle</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javascript/fonctionnel.html#les-arrow-functions">Les arrow functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/fonctionnel.html#l-utilisation-de-foreach">L’utilisation de forEach</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/fonctionnel.html#le-modele-filter-map-reduce">Le modèle filter/map/reduce</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/module.html">Les modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javascript/module.html#exporter">Exporter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../javascript/module.html#export-par-defaut">Export par défaut</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/module.html#importer">Importer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/symbol.html">Les symboles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javascript/symbol.html#les-symboles-comme-noms-de-proprietes">Les symboles comme noms de propriétés</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/symbol.html#well-known-symbols">well-known symbols</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/iterateur_generateur.html">Les itérateurs et les générateurs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javascript/iterateur_generateur.html#les-iterateurs">Les itérateurs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/iterateur_generateur.html#les-iterables">Les itérables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/iterateur_generateur.html#la-structure-for-of">La structure for … of</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/iterateur_generateur.html#les-generateurs">Les générateurs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/promesse.html">Les promesses</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javascript/promesse.html#la-classe-promise">La classe Promise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/promesse.html#le-chainage-des-appels">Le chaînage des appels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/promesse.html#traitements-paralleles">Traitements parallèles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/async_await.html">Programmation asynchrone avec async et await</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javascript/async_await.html#fonction-asynchrone">Fonction asynchrone</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/async_await.html#ordre-des-appels-dans-un-traitement-asynchrone">Ordre des appels dans un traitement asynchrone</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javascript/async_await.html#la-boucle-for-await">La boucle for await</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">three.js</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction et mise en place</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#chargement-asynchrone-en-local">Chargement asynchrone en local</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#fichier-html-de-base">Fichier HTML de base</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#creation-d-un-renderer">Création d’un renderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#creation-d-une-camera">Création d’une caméra</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#creation-d-une-scene">Création d’une scène</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#rendu-d-une-scene">Rendu d’une scène</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#redimensionnement-du-canevas">Redimensionnement du canevas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="objets_et_scene.html">Objets et scène</a><ul>
<li class="toctree-l2"><a class="reference internal" href="objets_et_scene.html#repere-de-coordonnees">Repère de coordonnées</a></li>
<li class="toctree-l2"><a class="reference internal" href="objets_et_scene.html#mesh-et-geometry">Mesh et Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="objets_et_scene.html#les-transformations-dans-l-espace">Les transformations dans l’espace</a><ul>
<li class="toctree-l3"><a class="reference internal" href="objets_et_scene.html#exercice">Exercice</a></li>
<li class="toctree-l3"><a class="reference internal" href="objets_et_scene.html#une-animation-simple">Une animation simple</a></li>
<li class="toctree-l3"><a class="reference internal" href="objets_et_scene.html#hierarchie-d-objets">Hiérarchie d’objets</a></li>
<li class="toctree-l3"><a class="reference internal" href="objets_et_scene.html#excercice">Excercice</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="materiaux.html">Les matériaux</a><ul>
<li class="toctree-l2"><a class="reference internal" href="materiaux.html#le-meshbasicmaterial">Le MeshBasicMaterial</a></li>
<li class="toctree-l2"><a class="reference internal" href="materiaux.html#les-lumieres">Les lumières</a></li>
<li class="toctree-l2"><a class="reference internal" href="materiaux.html#les-materiaux-reagissant-a-la-lumiere">Les matériaux réagissant à la lumière</a><ul>
<li class="toctree-l3"><a class="reference internal" href="materiaux.html#excercice">Excercice</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="materiaux.html#textures-et-maps">Textures et Maps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="materiaux.html#chargement-d-une-texture">Chargement d’une texture</a></li>
<li class="toctree-l3"><a class="reference internal" href="materiaux.html#un-texture-comme-color-map">Un texture comme <em>color map</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="materiaux.html#les-autres-types-de-textures">Les autres types de textures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="materiaux.html#les-ombres">Les ombres</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="interactions.html">Les interactions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="interactions.html#les-controleurs">Les contrôleurs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="interactions.html#le-controleur-orbital">Le contrôleur orbital</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="interactions.html#le-lancer-de-rayon">Le lancer de rayon</a></li>
<li class="toctree-l2"><a class="reference internal" href="interactions.html#la-projection">La projection</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="chargement_scene.html">Chargement de modèle</a><ul>
<li class="toctree-l2"><a class="reference internal" href="chargement_scene.html#le-chargeur-gltf">Le chargeur glTF</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Animation à partir de courbes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#les-courbes">Les courbes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#representation-graphique-d-une-courbe">Représentation graphique d’une courbe</a></li>
<li class="toctree-l2"><a class="reference internal" href="#animation-le-long-d-une-courbe">Animation le long d’une courbe</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exercice">Exercice</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Le JavaScript moderne</a>
        
      </nav>


      <div class="wy-nav-content">
<div class="banner">D'autres formations sont sur <a href="https://gayerie.dev">https://gayerie.dev</a></div>

        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Animation à partir de courbes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
      
        <a href="chargement_scene.html" class="btn btn-neutral float-left" title="Chargement de modèle" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="animation-a-partir-de-courbes">
<h1>Animation à partir de courbes<a class="headerlink" href="#animation-a-partir-de-courbes" title="Lien permanent vers ce titre">¶</a></h1>
<p>Pour concevoir des animations plus complexes, il est possible de faire mouvoir
des objets d’un scène en suivant un chemin défini par une courbe.</p>
<div class="section" id="les-courbes">
<h2>Les courbes<a class="headerlink" href="#les-courbes" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="https://threejs.org/">three.js</a> fournit un ensemble de classes héritant de <a class="reference external" href="https://threejs.org/docs/index.html#api/en/extras/core/Curve">Curve</a>. Ces classes représentent
de courbes mathématiques à partir desquels il est possible de réaliser une interpolation.
Ces courbes sont généralement définies par des points de contrôles.</p>
<p>Il existe des courbes 2D comme la <a class="reference external" href="https://threejs.org/docs/index.html#api/en/extras/curves/CubicBezierCurve">CubicBezierCurve</a> et des courbes 3D la <a class="reference external" href="https://threejs.org/docs/index.html#api/en/extras/curves/CubicBezierCurve3">CubicBezierCurve3</a>.
Toutes ces courbes possède la méthode <a class="reference external" href="https://threejs.org/docs/index.html#api/en/extras/core/Curve.getPoint">getPoint</a> qui permet connaître les coordonnées
d’un point sur la courbe à partir de sa position le long de la courbe (la position
étant donnée par un nombre entre 0 et 1).</p>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">utf-8</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>three.js app<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
      <span class="nt">body</span> <span class="p">{</span>
        <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Quelques points le long d&#39;une courbe de Bézier<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://threejs.org/build/three.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
      <span class="c1">// création d&#39;un courbe de Bézier à partir d&#39;un point de départ,</span>
      <span class="c1">// de deux points de contrôle et d&#39;un point d&#39;arrivée.</span>
      <span class="kd">var</span> <span class="nx">curve</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">CubicBezierCurve3</span><span class="p">(</span>
        <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Vector3</span><span class="p">(</span><span class="o">-</span><span class="mf">10</span><span class="p">,</span>  <span class="mf">0</span><span class="p">,</span> <span class="mf">3</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Vector3</span><span class="p">(</span> <span class="o">-</span><span class="mf">5</span><span class="p">,</span> <span class="mf">15</span><span class="p">,</span> <span class="mf">2</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Vector3</span><span class="p">(</span> <span class="mf">20</span><span class="p">,</span> <span class="mf">15</span><span class="p">,</span> <span class="mf">1</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Vector3</span><span class="p">(</span> <span class="mf">10</span><span class="p">,</span>  <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">)</span>
      <span class="p">);</span>

      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mf">11</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">curve</span><span class="p">.</span><span class="nx">getPoint</span><span class="p">(</span><span class="nx">i</span> <span class="o">*</span> <span class="mf">1</span><span class="o">/</span><span class="mf">10</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s2">&quot;&lt;p&gt;(&quot;</span> <span class="o">+</span> <span class="nx">p</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span>  <span class="nx">p</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="nx">p</span><span class="p">.</span><span class="nx">z</span> <span class="o">+</span> <span class="s2">&quot;)&lt;/p&gt;&quot;</span><span class="p">);</span>
      <span class="p">}</span>

    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<p>Vous pouvez <a class="reference download internal" download="" href="../_downloads/ab6d82f9b40627d2806d143932861419/scene013.html"><code class="xref download docutils literal notranslate"><span class="pre">télécharger</span> <span class="pre">ce</span> <span class="pre">fichier</span> <span class="pre">directement</span></code></a>.</p>
<p>Dans l’exemple ci-dessus, on récupère chaque point à la ligne 27 grâce à la méthode
<a class="reference external" href="https://threejs.org/docs/index.html#api/en/extras/core/Curve.getPoint">getPoint</a>.</p>
</div>
<div class="section" id="representation-graphique-d-une-courbe">
<h2>Représentation graphique d’une courbe<a class="headerlink" href="#representation-graphique-d-une-courbe" title="Lien permanent vers ce titre">¶</a></h2>
<p>On peut tracer à l’écran une courbe comme une succession de lignes. Plus on
sélectionne de points le long de la courbe, meilleur est l’échantillonnage et
la représentation finale. Pour afficher une courbe, on peut créer un objet <a class="reference external" href="https://threejs.org/docs/index.html#api/en/objects/Line">Line</a>
qui affiche en fait une succession de ligne à partir des <em>vertices</em> fournis
par la géométrie.</p>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">utf-8</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>three.js app<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
      <span class="nt">body</span> <span class="p">{</span>
        <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://threejs.org/build/three.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
      <span class="c1">// création du renderer</span>
      <span class="kd">var</span> <span class="nx">renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">();</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">domElement</span><span class="p">);</span>
      <span class="nx">renderer</span><span class="p">.</span><span class="nx">setSize</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">);</span>

      <span class="c1">// création de la caméra</span>
      <span class="kd">var</span> <span class="nx">camera</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">PerspectiveCamera</span><span class="p">(</span><span class="mf">45</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span> <span class="o">/</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">1000</span><span class="p">);</span>

      <span class="c1">// création de la scène</span>
      <span class="kd">var</span> <span class="nx">scene</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Scene</span><span class="p">();</span>

      <span class="c1">// couleur de fond noire</span>
      <span class="nx">scene</span><span class="p">.</span><span class="nx">background</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Color</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">);</span>

      <span class="c1">// création d&#39;un courbe de Bézier à partir d&#39;un point de départ,</span>
      <span class="c1">// de deux points de contrôle et d&#39;un point d&#39;arrivée.</span>
      <span class="kd">var</span> <span class="nx">curve</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">CubicBezierCurve3</span><span class="p">(</span>
        <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Vector3</span><span class="p">(</span><span class="o">-</span><span class="mf">10</span><span class="p">,</span>  <span class="mf">0</span><span class="p">,</span> <span class="mf">3</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Vector3</span><span class="p">(</span> <span class="o">-</span><span class="mf">5</span><span class="p">,</span> <span class="mf">15</span><span class="p">,</span> <span class="mf">2</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Vector3</span><span class="p">(</span> <span class="mf">20</span><span class="p">,</span> <span class="mf">15</span><span class="p">,</span> <span class="mf">1</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Vector3</span><span class="p">(</span> <span class="mf">10</span><span class="p">,</span>  <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">)</span>
      <span class="p">);</span>

      <span class="kd">var</span> <span class="nx">points</span> <span class="o">=</span> <span class="nx">curve</span><span class="p">.</span><span class="nx">getPoints</span><span class="p">(</span><span class="mf">40</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">geometry</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">BufferGeometry</span><span class="p">().</span><span class="nx">setFromPoints</span><span class="p">(</span><span class="nx">points</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">material</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">LineBasicMaterial</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">curveObject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Line</span><span class="p">(</span><span class="nx">geometry</span><span class="p">,</span> <span class="nx">material</span><span class="p">);</span>
      <span class="nx">scene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">curveObject</span><span class="p">);</span>

      <span class="nx">camera</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="mf">30</span><span class="p">;</span>
      <span class="nx">camera</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mf">5</span>

      <span class="c1">// rendu</span>
      <span class="nx">renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">scene</span><span class="p">,</span> <span class="nx">camera</span><span class="p">);</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<p>Vous pouvez <a class="reference download internal" download="" href="../_downloads/276986e646cc0739c59d3d50070ca966/scene014.html"><code class="xref download docutils literal notranslate"><span class="pre">télécharger</span> <span class="pre">ce</span> <span class="pre">fichier</span> <span class="pre">directement</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>La méthode <a class="reference external" href="https://threejs.org/docs/index.html#api/en/extras/core/Curve.getPoints">getPoints</a> retourne un tableau contenant autant de points sur
la courbe que demandé. Cette méthode permet de réaliser rapidement un
échantillonnage pour construire une géométrie.</p>
</div>
</div>
<div class="section" id="animation-le-long-d-une-courbe">
<h2>Animation le long d’une courbe<a class="headerlink" href="#animation-le-long-d-une-courbe" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une courbe peut également représenter un chemin suivi par un objet. Pour cela,
on peut tirer profit du fait que la méthode <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame">requestAnimationFrame</a> passe en paramètre
de la fonction de callback un <em>timestamp</em> correspond au moment de l’appel. Il est
donc possible d’utiliser cette information pour en déduire une position le long
de la courbe et mettre à jour la position de l’objet en conséquence :</p>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">utf-8</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>three.js app<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
      <span class="nt">body</span> <span class="p">{</span>
        <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://threejs.org/build/three.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
      <span class="c1">// création du renderer</span>
      <span class="kd">var</span> <span class="nx">renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">();</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">domElement</span><span class="p">);</span>
      <span class="nx">renderer</span><span class="p">.</span><span class="nx">setSize</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">);</span>

      <span class="c1">// création de la caméra</span>
      <span class="kd">var</span> <span class="nx">camera</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">PerspectiveCamera</span><span class="p">(</span><span class="mf">45</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span> <span class="o">/</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">1000</span><span class="p">);</span>

      <span class="c1">// création de la scène</span>
      <span class="kd">var</span> <span class="nx">scene</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Scene</span><span class="p">();</span>

      <span class="c1">// couleur de fond noire</span>
      <span class="nx">scene</span><span class="p">.</span><span class="nx">background</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Color</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">);</span>

      <span class="c1">// création d&#39;un courbe de Bézier à partir d&#39;un point de départ,</span>
      <span class="c1">// de deux points de contrôle et d&#39;un point d&#39;arrivée.</span>
      <span class="kd">var</span> <span class="nx">curve</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">CubicBezierCurve3</span><span class="p">(</span>
        <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Vector3</span><span class="p">(</span><span class="o">-</span><span class="mf">10</span><span class="p">,</span>  <span class="mf">0</span><span class="p">,</span> <span class="mf">3</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Vector3</span><span class="p">(</span> <span class="o">-</span><span class="mf">5</span><span class="p">,</span> <span class="mf">15</span><span class="p">,</span> <span class="mf">2</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Vector3</span><span class="p">(</span> <span class="mf">20</span><span class="p">,</span> <span class="mf">15</span><span class="p">,</span> <span class="mf">1</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Vector3</span><span class="p">(</span> <span class="mf">10</span><span class="p">,</span>  <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">)</span>
      <span class="p">);</span>

      <span class="kd">var</span> <span class="nx">points</span> <span class="o">=</span> <span class="nx">curve</span><span class="p">.</span><span class="nx">getPoints</span><span class="p">(</span><span class="mf">40</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">geometry</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">BufferGeometry</span><span class="p">().</span><span class="nx">setFromPoints</span><span class="p">(</span><span class="nx">points</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">material</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">LineBasicMaterial</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">curveObject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Line</span><span class="p">(</span><span class="nx">geometry</span><span class="p">,</span> <span class="nx">material</span><span class="p">);</span>
      <span class="nx">scene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">curveObject</span><span class="p">);</span>

      <span class="kd">var</span> <span class="nx">sphere</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Mesh</span><span class="p">(</span><span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">SphereGeometry</span><span class="p">());</span>
      <span class="nx">scene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">sphere</span><span class="p">);</span>

      <span class="nx">camera</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="mf">30</span><span class="p">;</span>
      <span class="nx">camera</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mf">5</span>

<span class="hll">      <span class="kd">var</span> <span class="nx">vitesse</span> <span class="o">=</span> <span class="mf">5</span><span class="p">;</span>
</span>
<span class="hll">      <span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span><span class="hll">      <span class="kd">function</span> <span class="nx">animate</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">        <span class="k">if</span> <span class="p">(</span><span class="nx">start</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">          <span class="nx">start</span> <span class="o">=</span> <span class="nx">t</span><span class="p">;</span>
</span><span class="hll">        <span class="p">}</span>
</span><span class="hll">        <span class="kd">var</span> <span class="nx">delai</span> <span class="o">=</span> <span class="nx">t</span> <span class="o">-</span> <span class="nx">start</span><span class="p">;</span>
</span><span class="hll">
</span><span class="hll">        <span class="nx">curve</span><span class="p">.</span><span class="nx">getPoint</span><span class="p">((</span><span class="nx">delai</span> <span class="o">*</span> <span class="nx">vitesse</span> <span class="o">*</span> <span class="mf">.0001</span><span class="p">)</span> <span class="o">%</span> <span class="mf">1</span><span class="p">,</span> <span class="nx">sphere</span><span class="p">.</span><span class="nx">position</span><span class="p">);</span>
</span><span class="hll">
</span><span class="hll">        <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">animate</span><span class="p">);</span>
</span><span class="hll">        <span class="nx">renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">scene</span><span class="p">,</span> <span class="nx">camera</span><span class="p">);</span>
</span><span class="hll">      <span class="p">}</span>
</span><span class="hll">      <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">animate</span><span class="p">);</span>
</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<p>Vous pouvez <a class="reference download internal" download="" href="../_downloads/475199645685d633ff9090bc57d841fd/scene015.html"><code class="xref download docutils literal notranslate"><span class="pre">télécharger</span> <span class="pre">ce</span> <span class="pre">fichier</span> <span class="pre">directement</span></code></a>.</p>
<p>Dans l’exemple ci-dessous, la fonction <code class="docutils literal notranslate"><span class="pre">animate</span></code> reçoit en paramètre le <em>timestamp</em>
du rendu. Elle renseigne la variable <code class="docutils literal notranslate"><span class="pre">start</span></code> la première fois, puis elle calcule
la différence pour connaître le temps écoulé depuis le début de la scène. On peut
ensuite en déduire ligne 69, la position de l’objet le long du chemin. Notez que
la méthode <a class="reference external" href="https://threejs.org/docs/index.html#api/en/extras/core/Curve.getPoint">getPoint</a> accepte en second paramètre un vecteur qu’elle met directement
à jour.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Vous pouvez également utiliser la méthode <a class="reference external" href="https://threejs.org/docs/index.html#api/en/extras/core/Curve.getPointAt">getPointAt</a>. Cette méthode tient
compte de la courbure entre deux points et crée un mouvement uniforme tandis
que <a class="reference external" href="https://threejs.org/docs/index.html#api/en/extras/core/Curve.getPoint">getPoint</a> crée des effets d’accélération et de décélération.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Vous pouvez tester un autre exemple à <a class="reference external" href="https://spoonless.github.io/tuto_threejs/curve.html">cette adresse</a>.</p>
</div>
</div>
<div class="section" id="exercice">
<h2>Exercice<a class="headerlink" href="#exercice" title="Lien permanent vers ce titre">¶</a></h2>
<div class="exercice admonition">
<p class="admonition-title">Modification de l’animation le long d’une courbe</p>
<p>Modifiez l’exemple ci-dessus afin que l’animation ne boucle pas. Lorsque la sphère
arrive au bout de la courbe, elle doit simplement repartir en sens inverse.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="chargement_scene.html" class="btn btn-neutral float-left" title="Chargement de modèle" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
  <div  role="contentinfo">
    <p>
    Par David Gayerie
    - <script>!function(){function e(e){return e.replace(/[a-zA-Z]/g,function(e){return String.fromCharCode((e<="Z"?90:122)>=(e=e.charCodeAt(0)+13)?e:e-26)})}!function(e){document.write("<a href='mailto:"+e+"'>"+e+"</a>")}(e("qnivq@tnlrevr.qri"))}();</script>
    - <a class="reference external" href="https://gayerie.dev">https://gayerie.dev</a>
    </p>
    <p class="copyright">
      <a class="reference external image-reference" href="https://creativecommons.org/licenses/by-sa/3.0/fr/"><img alt="Licence Creative Commons" src="https://i.creativecommons.org/l/by-sa/3.0/fr/88x31.png" /></a>
      Cette œuvre est mise à disposition selon les termes de la <a class="reference external" href="https://creativecommons.org/licenses/by-sa/3.0/fr/">Licence Creative Commons Attribution</a> -  Partage dans les Mêmes Conditions 3.0 France
    </p>
  </div>


</footer>

        </div>

      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-99071053-2', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>