

<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8">
  <meta content="David Gayerie" name="author" />
<meta content="Thymeleaf avec le Spring Framework" name="description" />
<meta content="Java, Spring Framework, framework, Jakarta EE, Java EE, IoC, injection de dépendances, thymeleaf" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  

  <title>Introduction à Thymeleaf &mdash; Spring Framework / Spring Boot</title>



  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom_rtd_theme.css" type="text/css" />

  
  
  
  
    <link rel="canonical" href="https://gayerie.dev/docs/spring/spring/thymeleaf.html"/>
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Spring DAO" href="spring_dao.html" />
    <link rel="prev" title="Les API Web avec Spring Web MVC" href="spring_mvc_apiweb.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Spring Framework / Spring Boot
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Recherche dans les pages" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Spring Framework et Spring Boot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#le-spring-framework-vs-j2ee">Le Spring Framework vs. J2EE</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#spring-boot-et-la-configuration-automatique">Spring Boot et la configuration automatique</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#les-modules-spring-framework">Les modules Spring Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#les-projets-spring">Les projets Spring</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#documentation">Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="principe_ioc.html">L’inversion de contrôle</a><ul>
<li class="toctree-l2"><a class="reference internal" href="principe_ioc.html#l-injection-de-dependance">L’injection de dépendance</a></li>
<li class="toctree-l2"><a class="reference internal" href="principe_ioc.html#id2">L’inversion de contrôle</a></li>
<li class="toctree-l2"><a class="reference internal" href="principe_ioc.html#notion-de-conteneur-ioc">Notion de conteneur IoC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="application_context.html">Le contexte d’application</a><ul>
<li class="toctree-l2"><a class="reference internal" href="application_context.html#mise-en-place-du-projet">Mise en place du projet</a></li>
<li class="toctree-l2"><a class="reference internal" href="application_context.html#une-premiere-application-avec-spring">Une première application avec Spring</a></li>
<li class="toctree-l2"><a class="reference internal" href="application_context.html#notion-de-portee-scope">Notion de portée (scope)</a></li>
<li class="toctree-l2"><a class="reference internal" href="application_context.html#l-injection-de-bean">L’injection de bean</a></li>
<li class="toctree-l2"><a class="reference internal" href="application_context.html#les-methodes-d-initialisation-et-de-destruction">Les méthodes d’initialisation et de destruction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="annotations.html">Déclaration par annotations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#l-annotation-autowired">L’annotation &#64;Autowired</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#desambiguisation-avec-primary-et-qualifier">Désambiguïsation avec &#64;Primary et &#64;Qualifier</a><ul>
<li class="toctree-l3"><a class="reference internal" href="annotations.html#l-annotation-primary">L’annotation &#64;Primary</a></li>
<li class="toctree-l3"><a class="reference internal" href="annotations.html#l-annotation-qualifier">L’annotation &#64;Qualifier</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#l-annotation-value">L’annotation &#64;Value</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#les-annotations-jsr-250">Les annotations JSR-250</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#detection-automatique-des-composants-component-scan">Détection automatique des composants (<em>component scan</em>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#notion-de-composant">Notion de composant</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#stereotype-de-composant">Stéréotype de composant</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#le-stereotype-configuration">Le stéréotype &#64;Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#creation-de-stereotype-de-composant">Création de stéréotype de composant</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#notions-avancees-pour-la-gestion-des-dependances">Notions avancées pour la gestion des dépendances</a><ul>
<li class="toctree-l3"><a class="reference internal" href="annotations.html#l-annotation-order">L’annotation &#64;Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="annotations.html#l-annotation-dependson">L’annotation &#64;DependsOn</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#support-des-annotations-standard-jsr-330">Support des annotations standard JSR-330</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="application_context_conf.html">Configuration d’une application</a><ul>
<li class="toctree-l2"><a class="reference internal" href="application_context_conf.html#lancer-une-application-spring-boot">Lancer une application Spring Boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="application_context_conf.html#spring-boot-et-le-fichier-application-properties">Spring Boot et le fichier application.properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="application_context_conf.html#injection-des-proprietes-avec-value">Injection des propriétés avec &#64;Value</a></li>
<li class="toctree-l2"><a class="reference internal" href="application_context_conf.html#ajout-de-fichiers-de-proprietes-avec-propertysource">Ajout de fichiers de propriétés avec &#64;PropertySource</a></li>
<li class="toctree-l2"><a class="reference internal" href="application_context_conf.html#les-variables-d-environnement">Les variables d’environnement</a></li>
<li class="toctree-l2"><a class="reference internal" href="application_context_conf.html#la-classe-environment">La classe Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="application_context_conf.html#beans-de-proprietes-avec-configurationproperties-spring-boot">Beans de propriétés avec &#64;ConfigurationProperties (Spring Boot)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="application_context_conf.html#introduction-a-bean-validation">Introduction à Bean Validation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="application_context_conf.html#pour-en-savoir-plus">Pour en savoir plus</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="spel.html">Le langage d’expression SpEL</a><ul>
<li class="toctree-l2"><a class="reference internal" href="spel.html#un-exemple-d-utilisation-de-spel">Un exemple d’utilisation de SpEL</a></li>
<li class="toctree-l2"><a class="reference internal" href="spel.html#principe-de-spel">Principe de SpEL</a></li>
<li class="toctree-l2"><a class="reference internal" href="spel.html#l-operateur-ternaire">L’opérateur ternaire</a></li>
<li class="toctree-l2"><a class="reference internal" href="spel.html#l-operateur-elvis">L’opérateur Elvis</a></li>
<li class="toctree-l2"><a class="reference internal" href="spel.html#l-operateur-de-surete">L’opérateur de sûreté</a></li>
<li class="toctree-l2"><a class="reference internal" href="spel.html#la-projection">La projection</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="aop.html">Spring AOP : programmation orientée aspect</a><ul>
<li class="toctree-l2"><a class="reference internal" href="aop.html#principe-de-la-programmation-orientee-aspect">Principe de la programmation orientée aspect</a></li>
<li class="toctree-l2"><a class="reference internal" href="aop.html#terminologie-de-la-programmation-orientee-aspect">Terminologie de la programmation orientée aspect</a></li>
<li class="toctree-l2"><a class="reference internal" href="aop.html#integration-du-module-spring-aop">Intégration du module Spring AOP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="aop.html#integration-dans-une-application-spring-boot">Intégration dans une application Spring Boot</a></li>
<li class="toctree-l3"><a class="reference internal" href="aop.html#integration-dans-une-application-sans-spring-boot">Intégration dans une application sans Spring Boot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="aop.html#exemple-de-programmation-orientee-aspect-avec-spring-aop">Exemple de programmation orientée aspect avec Spring AOP</a></li>
<li class="toctree-l2"><a class="reference internal" href="aop.html#la-programmation-orientee-aspect-pour-gerer-les-annotations">La programmation orientée Aspect pour gérer les annotations</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Spring Web MVC</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="spring_mvc_intro.html">Introduction à Spring Web MVC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc_intro.html#le-modele-mvc">Le modèle MVC</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc_intro.html#integration-de-spring-web-mvc">Intégration de Spring Web MVC</a><ul>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc_intro.html#integration-dans-une-application-avec-spring-boot">Intégration dans une application avec Spring Boot</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc_intro.html#integration-dans-une-application-sans-spring-boot">Intégration dans une application sans Spring Boot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc_intro.html#l-encodage-des-parametres-de-requetes">L’encodage des paramètres de requêtes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="spring_mvc.html">Les applications Web avec Spring Web MVC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc.html#les-controleurs">Les contrôleurs</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc.html#les-vues-jsp">Les vues JSP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#pour-une-application-avec-spring-boot">Pour une application avec Spring Boot</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#pour-une-application-sans-spring-boot">Pour une application sans Spring Boot</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#utilisation-des-vues-jsp">Utilisation des vues JSP</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc.html#les-vues-thymeleaf">Les vues Thymeleaf</a><ul>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#id1">Pour une application avec Spring Boot</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#id2">Pour une application sans Spring Boot</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#utilisation-des-vues-thymeleaf">Utilisation des vues Thymeleaf</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc.html#le-modele">Le modèle</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc.html#une-application-multi-couches-n-tiers">Une application multi-couches (N-Tiers)</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc.html#la-signature-des-methodes-de-controleur">La signature des méthodes de contrôleur</a><ul>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#les-parametres">Les paramètres</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#la-valeur-de-retour">La valeur de retour</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc.html#taglib-jsp-et-gestion-des-formulaires">Taglib JSP et gestion des formulaires</a><ul>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#spring-s-jsp-taglib">Spring’s JSP taglib</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#form-taglib">Form taglib</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc.html#gestion-des-formulaires-avec-thymeleaf">Gestion des formulaires avec Thymeleaf</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc.html#externalisation-des-messages">Externalisation des messages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#id4">Pour une application avec Spring Boot</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#id5">Pour une application sans Spring Boot</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#utilisation-des-messages-dans-une-jsp">Utilisation des messages dans une JSP</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#utilisation-des-messages-avec-thymeleaf">Utilisation des messages avec Thymeleaf</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc.html#validation-des-parametres-d-une-requete">Validation des paramètres d’une requête</a><ul>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#la-notion-de-binding-et-le-bindingresult">La notion de <em>binding</em> et le BindingResult</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#validation-dans-la-methode-du-controleur">Validation dans la méthode du contrôleur</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#creation-d-un-validateur">Création d’un validateur</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#validation-declarative-avec-bean-validation">Validation déclarative avec Bean Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc.html#affichage-des-erreurs-de-validation">Affichage des erreurs de validation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc.html#post-redirect-get">POST-redirect-GET</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc.html#la-gestion-des-exceptions">La gestion des exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc.html#methodes-de-modele">Méthodes de modèle</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc.html#methodes-de-binder">Méthodes de binder</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc.html#controlleradvice">ControllerAdvice</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="spring_mvc_apiweb.html">Les API Web avec Spring Web MVC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc_apiweb.html#support-pour-les-formats-json-et-xml">Support pour les formats JSON et XML</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc_apiweb.html#l-annotation-restcontroller">L’annotation &#64;RestController</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc_apiweb.html#un-controleur-pour-une-api-web">Un contrôleur pour une API Web</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc_apiweb.html#la-negociation-de-contenu">La négociation de contenu</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc_apiweb.html#l-envoi-de-donnees">L’envoi de données</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc_apiweb.html#la-reponse">La réponse</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc_apiweb.html#restcontrolleradvice">RestControllerAdvice</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc_apiweb.html#les-annotations-jackson">Les annotations Jackson</a><ul>
<li class="toctree-l3"><a class="reference internal" href="spring_mvc_apiweb.html#les-vues-json">Les vues JSON</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spring_mvc_apiweb.html#implementation-d-un-client">Implémentation d’un client</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction à Thymeleaf</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#integration-de-thymeleaf">Intégration de Thymeleaf</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pour-une-application-avec-spring-boot">Pour une application avec Spring Boot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pour-une-application-sans-spring-boot">Pour une application sans Spring Boot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#les-attributs-thymeleaf">Les attributs Thymeleaf</a></li>
<li class="toctree-l2"><a class="reference internal" href="#l-expression-d-evaluation">${…} : l’expression d’évaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#l-expression-de-selection">*{…} : l’expression de sélection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#l-expression-de-message">#{…} : l’expression de message</a></li>
<li class="toctree-l2"><a class="reference internal" href="#l-expression-d-url">&#64;{…} : l’expression d’URL</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prevention-de-l-injection">Prévention de l’injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#les-conditions-et-les-boucles">Les conditions et les boucles</a></li>
<li class="toctree-l2"><a class="reference internal" href="#operateur-de-coalescence-des-nuls">Opérateur de coalescence des nuls</a></li>
<li class="toctree-l2"><a class="reference internal" href="#le-formatage-des-donnees">Le formatage des données</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Spring et l'accès aux bases de données</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="spring_dao.html">Spring DAO</a><ul>
<li class="toctree-l2"><a class="reference internal" href="spring_dao.html#l-annotation-repository">L’annotation &#64;Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_dao.html#integration-de-jpa">Intégration de JPA</a><ul>
<li class="toctree-l3"><a class="reference internal" href="spring_dao.html#integration-dans-une-application-spring-boot">Intégration dans une application Spring Boot</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_dao.html#integration-dans-une-application-sans-spring-boot">Intégration dans une application sans Spring Boot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spring_dao.html#acces-aux-donnees-avec-jdbc">Accès aux données avec JDBC</a><ul>
<li class="toctree-l3"><a class="reference internal" href="spring_dao.html#id1">Intégration dans une application Spring Boot</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_dao.html#id2">Intégration dans une application sans Spring Boot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spring_dao.html#uniformite-de-la-hierarchie-des-exceptions">Uniformité de la hiérarchie des exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="spring_data_jpa.html">Spring Data avec JPA</a><ul>
<li class="toctree-l2"><a class="reference internal" href="spring_data_jpa.html#notion-de-repository">Notion de repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_data_jpa.html#spring-data-jpa">Spring Data JPA</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_data_jpa.html#integration-des-repositories">Intégration des repositories</a><ul>
<li class="toctree-l3"><a class="reference internal" href="spring_data_jpa.html#integration-dans-une-application-spring-boot">Intégration dans une application Spring Boot</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_data_jpa.html#integration-dans-une-application-sans-spring-boot">Intégration dans une application sans Spring Boot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spring_data_jpa.html#injection-des-repositories">Injection des <em>repositories</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_data_jpa.html#ajout-de-methodes-dans-une-interface-de-repository">Ajout de méthodes dans une interface de repository</a><ul>
<li class="toctree-l3"><a class="reference internal" href="spring_data_jpa.html#requetes-nommees-jpa">Requêtes nommées JPA</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_data_jpa.html#utilisation-de-query">Utilisation de &#64;Query</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spring_data_jpa.html#declaration-de-requetes-de-modification">Déclaration de requêtes de modification</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_data_jpa.html#implementation-des-methodes-de-repository">Implémentation des méthodes de <em>repository</em></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="spring_tx.html">Spring Transaction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="spring_tx.html#la-transaction">La transaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_tx.html#spring-boot-et-la-configuration-automatique">Spring Boot et la configuration automatique</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_tx.html#transaction-et-couche-de-service">Transaction et couche de service</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_tx.html#l-annotation-transactional">L’annotation &#64;Transactional</a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_tx.html#gestion-declarative-du-rollback">Gestion déclarative du <em>rollback</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="spring_tx.html#configuration-avancee-pour-les-transactions">Configuration avancée pour les transactions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="spring_tx.html#la-propagation">La propagation</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring_tx.html#l-isolation">L’isolation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spring_tx.html#configuration-des-transactions-sans-spring-boot">Configuration des transactions sans Spring Boot</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Spring Framework / Spring Boot</a>
        
      </nav>


      <div class="wy-nav-content">
<div class="banner">D'autres formations sont sur <a href="https://gayerie.dev">https://gayerie.dev</a></div>

        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Introduction à Thymeleaf</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="spring_dao.html" class="btn btn-neutral float-right" title="Spring DAO" accesskey="n">Suivant <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="spring_mvc_apiweb.html" class="btn btn-neutral float-left" title="Les API Web avec Spring Web MVC" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="introduction-a-thymeleaf">
<h1>Introduction à Thymeleaf<a class="headerlink" href="#introduction-a-thymeleaf" title="Lien permanent vers ce titre">¶</a></h1>
<p><a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">Thymeleaf</a> est un <em>template engine</em> (moteur de rendu de document) écrit en
Java. Principalement conçu pour produire des vues Web, il fournit un support pour
la génération de documents HTML, XHTML, JavaScript et CSS (voire de n’importe quel
format texte).</p>
<p>Il existe plusieurs <em>template engines</em> en Java : JSP (directement inclus
dans le moteur de Servlet des serveurs Web Java), FreeMarker, Velocity… Il n’est
donc pas facile de savoir quelle solution choisir. Thymeleaf a cependant plusieurs
avantages par rapport aux autres <em>template engines</em> :</p>
<ul class="simple">
<li><p>il permet de créer des <em>templates</em> qui respectent le format du document. Si vous
écrivez un <em>template</em> pour une page HTML, le <em>template</em> sera une page HTML valide.</p></li>
<li><p>il permet de fournir des valeurs par défaut dans un <em>template</em>. On peut ainsi concevoir
des <em>templates</em> pour un site Web avec des données d’exemple et le site reste
navigable hors ligne comme un simple site statique. Cela est particulièrement
utile si vous travaillez en collaboration avec des designers Web ou si vous
voulez réaliser un maquettage de votre site.</p></li>
<li><p>il s’intègre parfaitement dans une application Spring puisque vous pourrez
utiliser le langage d’expression de Spring (<a class="reference internal" href="spel.html"><span class="doc">SpEL</span></a>) pour dynamiser
vos <em>templates</em>.</p></li>
<li><p>il est facile à apprendre.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ce chapitre est une brève introduction à Thymeleaf, n’hésitez pas à vous
reporter à la <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">documentation officielle</a> ainsi qu’à la <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/thymeleafspring.html">documentation sur
l’intégration dans Spring</a>.</p>
</div>
<div class="section" id="integration-de-thymeleaf">
<h2>Intégration de Thymeleaf<a class="headerlink" href="#integration-de-thymeleaf" title="Lien permanent vers ce titre">¶</a></h2>
<p>Nous allons voir comment intégrer le moteur de rendu <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">Thymeleaf</a> dans une application.</p>
<div class="section" id="pour-une-application-avec-spring-boot">
<h3>Pour une application avec Spring Boot<a class="headerlink" href="#pour-une-application-avec-spring-boot" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour une application utilisant Spring Boot, la configuration est très simple.
Il vous suffit d’ajouter une dépendance dans votre projet au module
<code class="docutils literal notranslate"><span class="pre">spring-boot-starter-thymeleaf</span></code>. Si vous utilisez Maven, il vous faut
ajouter dans votre fichier <code class="file docutils literal notranslate"><span class="pre">pom.xml</span></code> :</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-thymeleaf<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
<p>Par défaut, les <em>templates</em> <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">Thymeleaf</a> doivent être placés dans le répertoire
<code class="file docutils literal notranslate"><span class="pre">src/main/resources/templates</span></code> de votre projet. Les fichiers statiques
(non transformés par <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">Thymeleaf</a>) doivent être placés dans le répertoire
<code class="file docutils literal notranslate"><span class="pre">src/main/resources/static</span></code> de votre projet.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Si vous voulez changer les répertoires par défaut, vous pouvez utiliser
les propriétés <code class="docutils literal notranslate"><span class="pre">spring.thymeleaf.prefix</span></code> et <code class="docutils literal notranslate"><span class="pre">spring.web.resources.static-locations</span></code>
dans le fichier de configuration <code class="file docutils literal notranslate"><span class="pre">src/main/resources/application.properties</span></code>.</p>
<p>Il existe de nombreuses autres propriétés qui sont documentées dans la
section <em>Templating Properties</em> de la <a class="reference external" href="https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#templating-properties">documentation Spring Boot</a> pour
paramétrer l’intégration de <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">Thymeleaf</a>.</p>
</div>
</div>
<div class="section" id="pour-une-application-sans-spring-boot">
<h3>Pour une application sans Spring Boot<a class="headerlink" href="#pour-une-application-sans-spring-boot" title="Lien permanent vers ce titre">¶</a></h3>
<p>L’intégration de <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">Thymeleaf</a> dans une application sans Spring Boot est plus
compliquée car il est nécessaire de créer la configuration du moteur du
rendu. Si vous voulez vraiment faire cette intégration, alors vous pouvez
vous reporter à la <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/thymeleafspring.html#integrating-thymeleaf-with-spring">documentation officielle de Thymeleaf</a>.</p>
</div>
</div>
<div class="section" id="les-attributs-thymeleaf">
<h2>Les attributs Thymeleaf<a class="headerlink" href="#les-attributs-thymeleaf" title="Lien permanent vers ce titre">¶</a></h2>
<p>Un <em>template</em> <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">Thymeleaf</a> pour une page HTML5 est une page HTML utilisant des attributs
<a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">Thymeleaf</a> qui seront interprétés par le serveur pour produire la page finale.</p>
<p>Afin de respecter le format HTML5, les attributs thymeleaf sont déclarés comme
des attributs <code class="docutils literal notranslate"><span class="pre">data-th-*</span></code>. Ces attributs ne seront pas présents dans la page
finale mais permettent de garantir que le <em>template</em> est lui-même une page <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes">HTML5
valide</a>.</p>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Une page<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">data-th-text</span><span class="o">=</span><span class="s">&quot;${ user.login }&quot;</span><span class="p">&gt;</span>David<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<p>Dans l’exemple ci-dessus, on utilise l’attribut <code class="docutils literal notranslate"><span class="pre">data-th-text</span></code> pour indiquer
le contenu texte de la balise <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code>. Le texte <em>David</em> sera
remplacé à l’exécution par le résultat de l’expression <code class="docutils literal notranslate"><span class="pre">${</span> <span class="pre">user.login</span> <span class="pre">}</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Si vous voulez produire des documents XHTML ou XML, vous pouvez déclarer
<a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">Thymeleaf</a> comme un espace de nom XML pour garantir que le <em>template</em> est
un document XHTML ou XML bien formé.</p>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.1//EN&quot;</span>
<span class="cp">                      &quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd&quot;&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span>
      <span class="na">xmlns:th</span><span class="o">=</span><span class="s">&quot;http://www.thymeleaf.org&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Une page<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&quot;${ user.login }&quot;</span><span class="p">&gt;</span>David<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
<p>Le contenu des attributs <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">Thymeleaf</a> peut être du simple texte ou une expression
qui sera interprétée à l’exécution. Les expressions sont délimitées par :</p>
<dl class="simple">
<dt><strong>${…}</strong></dt><dd><p>Pour les expressions à évaluer</p>
</dd>
<dt><strong>*{…}</strong></dt><dd><p>Pour les expressions de sélection à évaluer</p>
</dd>
<dt><strong>#{…}</strong></dt><dd><p>Pour les expressions de message</p>
</dd>
<dt><strong>&#64;{…}</strong></dt><dd><p>Pour les expressions d’URL</p>
</dd>
<dt><strong>~{…}</strong></dt><dd><p>Pour les expressions de fragment</p>
</dd>
</dl>
</div>
<div class="section" id="l-expression-d-evaluation">
<h2>${…} : l’expression d’évaluation<a class="headerlink" href="#l-expression-d-evaluation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une expression délimitée par <code class="docutils literal notranslate"><span class="pre">${...}</span></code> représente une expression à évaluer.
Dans une application Spring, cette expression est écrite avec <a class="reference internal" href="spel.html"><span class="doc">SpEL</span></a>
et peut référencer n’importe quel objet présent dans le modèle.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>${ user.login }
${ facture.montantTotal }
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Par défaut, les objets <code class="docutils literal notranslate"><span class="pre">param</span></code>, <code class="docutils literal notranslate"><span class="pre">session</span></code> et <code class="docutils literal notranslate"><span class="pre">application</span></code> sont
disponibles pour accéder aux paramètres de la requête, aux objets présents
dans la session utilisateur et aux objets présents dans la portée Java EE
de l’application :</p>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Une page<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">data-th-text</span><span class="o">=</span><span class="s">&quot;${ &#39;Bonjour &#39; + param.nom }&quot;</span><span class="p">&gt;</span>Bonjour vous<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<p>Le <em>template</em> ci-dessus utilise la valeur du paramètre de la requête <code class="docutils literal notranslate"><span class="pre">nom</span></code> pour
construire le message d’accueil.</p>
</div>
<p>Il est également possible de référencer n’importe quel <em>bean</em> du contexte
d’application en précisant <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> devant son nom. Si dans une application Spring,
nous avons un <em>bean</em> :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">dev.gayerie</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="p">;</span>

<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Info</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&quot;Bonjour&quot;</span><span class="p">;</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getMessage</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="n">message</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Il est possible d’accéder dans une expression à la valeur de l’attribut
<code class="docutils literal notranslate"><span class="pre">message</span></code> du <em>bean</em> <code class="docutils literal notranslate"><span class="pre">info</span></code> :</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>${ @info.message }
</pre></div>
</div>
<p>Il existe également des objets prédéfinis qui sont accessibles
en préfixant leur nom avec <code class="docutils literal notranslate"><span class="pre">#</span></code>. On trouve des <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#appendix-a-expression-basic-objects">objets dépendants du
contexte d’exécution</a> comme <code class="docutils literal notranslate"><span class="pre">#locale</span></code> :</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>${ #locale.displayLanguage }
</pre></div>
</div>
<p>On trouve également des <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#appendix-b-expression-utility-objects">objets utilitaires</a> pour nous aider à manipuler ou
à formater des données (date, URI, nombres, listes…)</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>${ #strings.listJoin({&#39;hello&#39;, &#39;world&#39;}, &#39; &#39;) }
</pre></div>
</div>
<p>L’expression ci-dessus appelle la méthode <code class="docutils literal notranslate"><span class="pre">listJoin</span></code> de l’objet utilitaire
<code class="docutils literal notranslate"><span class="pre">#strings</span></code> pour concaténer un tableau passé en paramètre et en insérant
un séparateur passé en second paramètre. Le résultat de cette expression est
donc :</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hello world
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Même si cela n’est pas indiqué dans la documentation officielle, <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">Thymeleaf</a>
fournit un objet <code class="docutils literal notranslate"><span class="pre">#temporals</span></code> pour nous aider à manipuler les objets
du package <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html">java.time</a> pour représenter les dates et le temps :</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>${ #temporals.format( T(java.time.LocalDate).now(), &#39;dd MMMM YYYY&#39;) }
</pre></div>
</div>
</div>
</div>
<div class="section" id="l-expression-de-selection">
<h2>*{…} : l’expression de sélection<a class="headerlink" href="#l-expression-de-selection" title="Lien permanent vers ce titre">¶</a></h2>
<p>Un expression délimitée par <code class="docutils literal notranslate"><span class="pre">*{...}</span></code> représente une expression à évaluer
pour sélectionner un attribut d’un objet. On utilise l’attribut <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">Thymeleaf</a>
<a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#expressions-on-selections-asterisk-syntax">object</a> pour définir l’objet de référence. Ce type d’expression est très utile
lorsqu’on veut construire des formulaires ou afficher les propriétés d’un
objet du modèle. Imaginons que nous voulons afficher les informations d’un
objet du modèle qui s’appelle <code class="docutils literal notranslate"><span class="pre">utilisateur</span></code>, cet objet contient les propriétés
<code class="docutils literal notranslate"><span class="pre">prenom</span></code>, <code class="docutils literal notranslate"><span class="pre">nom</span></code> et <code class="docutils literal notranslate"><span class="pre">age</span></code>. Nous pouvons indiquer que cet objet est l’objet
de référence et sélectionner chaque propriété avec <code class="docutils literal notranslate"><span class="pre">*{...}</span></code> :</p>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Une page<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">data-th-object</span><span class="o">=</span><span class="s">&quot;${ utilisateur }&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Prénom : <span class="p">&lt;</span><span class="nt">span</span> <span class="na">data-th-text</span><span class="o">=</span><span class="s">&quot;*{ prenom }&quot;</span><span class="p">&gt;</span>Jean<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Nom : <span class="p">&lt;</span><span class="nt">span</span> <span class="na">data-th-text</span><span class="o">=</span><span class="s">&quot;*{ nom }&quot;</span><span class="p">&gt;</span>Dubois<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Age : <span class="p">&lt;</span><span class="nt">span</span> <span class="na">data-th-text</span><span class="o">=</span><span class="s">&quot;*{ age }&quot;</span><span class="p">&gt;</span>35<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span> ans<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="l-expression-de-message">
<h2>#{…} : l’expression de message<a class="headerlink" href="#l-expression-de-message" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une expression délimitée par <code class="docutils literal notranslate"><span class="pre">#{...}</span></code> représente un message à extraire d’un
fichier de ressources. Dans une application Spring Boot, vous pouvez externaliser
vos messages dans le fichier <code class="file docutils literal notranslate"><span class="pre">src/main/resources/messages.properties</span></code>.
Pour en savoir plus, reportez-vous à <a class="reference internal" href="spring_mvc.html#spring-web-mvc-externalisation-messages"><span class="std std-ref">la section du chapitre Spring Web MVC</span></a>
consacrée à ce sujet.</p>
</div>
<div class="section" id="l-expression-d-url">
<h2>&#64;{…} : l’expression d’URL<a class="headerlink" href="#l-expression-d-url" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une expression délimitée par <code class="docutils literal notranslate"><span class="pre">&#64;{...}</span></code> représente une URL qui doit être résolue
par rapport au contexte de génération de la page. Tous les liens internes
à votre application référençant vos pages, vos feuilles de style, vos fichiers
de script, … doivent utiliser des attributs <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">Thymeleaf</a> pour positionner le chemin.
L’attribut HTML correspondant peut être conservé pour permettre d’ouvrir la page
localement.</p>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Une page<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="hll">    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;../static/style.css&quot;</span> <span class="na">data-th-href</span><span class="o">=</span><span class="s">&quot;@{/style.css}&quot;</span><span class="p">&gt;</span>
</span><span class="hll">    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;../static/app.js&quot;</span> <span class="na">data-th-src</span><span class="o">=</span><span class="s">&quot;@{/app.js}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span>  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">nav</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;./inscription.html&quot;</span> <span class="na">data-th-href</span><span class="o">=</span><span class="s">&quot;@{/inscription}&quot;</span><span class="p">&gt;</span>S&#39;inscrire<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span class="hll">        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;./reservation.html&quot;</span> <span class="na">data-th-href</span><span class="o">=</span><span class="s">&quot;@{/reservation}&quot;</span><span class="p">&gt;</span>Réserver<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span>      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="prevention-de-l-injection">
<h2>Prévention de l’injection<a class="headerlink" href="#prevention-de-l-injection" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">Thymeleaf</a> est configuré par type de fichier pour prévenir l’injection de données.
Pour la génération de page HTML, <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">Thymeleaf</a> fera un échappement HTML pour les
caractères réservés comme <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> ou <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>.</p>
<p>Ainsi le <em>template</em> :</p>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Une page<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">data-th-text</span><span class="o">=</span><span class="s">&quot;${ &#39;&lt;strong&gt;Bonjour&lt;/strong&gt;&#39; }&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<p>produira la page HTML finale :</p>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Une page<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span><span class="ni">&amp;lt;</span>strong<span class="ni">&amp;gt;</span>Bonjour<span class="ni">&amp;lt;</span>/strong<span class="ni">&amp;gt;</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<p>Ainsi, les données dynamiques dans la page ne modifient pas la structure du
<em>template</em> et l’injection HTML n’est pas possible.</p>
</div>
<div class="section" id="les-conditions-et-les-boucles">
<h2>Les conditions et les boucles<a class="headerlink" href="#les-conditions-et-les-boucles" title="Lien permanent vers ce titre">¶</a></h2>
<p>Dans un <em>template</em>, il est très souvent nécessaire de produire une partie
d’un document à certaines conditions ou de répéter certaines portions (par
exemple pour générer un tableau). Le <a class="reference internal" href="spel.html"><span class="doc">langage SpEL</span></a> ne permet pas
d’exprimer des structures aussi complexes. Par contre, il existe les attributs
Thymeleaf <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#simple-conditionals-if-and-unless">if</a> et <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#using-theach">each</a> qui sont fait pour cela.</p>
<p>L’attribut <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#simple-conditionals-if-and-unless">if</a> permet de contrôler la production de la balise et de tout ce
qu’elle contient suivant l’expression d’une condition :</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">data-th-if</span><span class="o">=</span><span class="s">&quot;${ commande.remise &gt; 0 }&quot;</span><span class="p">&gt;</span>
    Vous pouvez disposez d&#39;une remise de
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">data-th-text</span><span class="o">=</span><span class="s">&quot;${ commande.remise }&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>%
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>L’attribut <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#using-theach">each</a> permet de parcourir un tableau ou une liste ou n’importe quelle
structure itérable et de répéter la balise et tout son contenu. On peut ainsi
produire un tableau HTML :</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Nom<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Age<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
   <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">data-th-each</span><span class="o">=</span><span class="s">&quot;p : ${ personnes }&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">data-th-text</span><span class="o">=</span><span class="s">&quot;${ p.nom }&quot;</span><span class="p">&gt;</span>Jean Dubois<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">data-th-text</span><span class="o">=</span><span class="s">&quot;${ p.age }&quot;</span><span class="p">&gt;</span>35<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Notez la syntaxe particulière de l’attribut <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#using-theach">each</a> qui rappelle le <code class="docutils literal notranslate"><span class="pre">for</span></code> amélioré
en Java. Il permet de déclarer une variable temporaire qui va représenter chaque
élément de la collection. Dans notre exemple, on déclare la variable <code class="docutils literal notranslate"><span class="pre">p</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Il est possible d’utiliser conjointement l’attribut <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#expressions-on-selections-asterisk-syntax">object</a> afin d’utiliser
des expressions de référence :</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Nom<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Age<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
   <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">data-th-each</span><span class="o">=</span><span class="s">&quot;p : ${ personnes }&quot;</span> <span class="na">data-th-object</span><span class="o">=</span><span class="s">&quot;p&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">data-th-text</span><span class="o">=</span><span class="s">&quot;*{ nom }&quot;</span><span class="p">&gt;</span>Jean Dubois<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">data-th-text</span><span class="o">=</span><span class="s">&quot;*{ age }&quot;</span><span class="p">&gt;</span>35<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="operateur-de-coalescence-des-nuls">
<h2>Opérateur de coalescence des nuls<a class="headerlink" href="#operateur-de-coalescence-des-nuls" title="Lien permanent vers ce titre">¶</a></h2>
<p>Attention à la gestion des valeurs nulles dans le modèle. Si on souhaite afficher
la valeur de l’attribut <code class="docutils literal notranslate"><span class="pre">nom</span></code> d’un objet du modèle appelé <code class="docutils literal notranslate"><span class="pre">utilisateur</span></code>. On
peut écrire :</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">span</span> <span class="na">data-th-text</span><span class="o">=</span><span class="s">&quot;${ utilisateur.nom }&quot;</span><span class="p">&gt;</span>le nom ici<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Mais que se passe-t-il si l’objet <code class="docutils literal notranslate"><span class="pre">utilisateur</span></code> n’est pas présent dans le
modèle ? La génération de la page va échouer avec une erreur car <code class="docutils literal notranslate"><span class="pre">utilisateur</span></code>
vaut <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
<p>Les expressions à évaluer supportent l’opérateur de coalescence des valeurs nulles
noté <code class="docutils literal notranslate"><span class="pre">?.</span></code>. Ainsi si nous modifions l’expression :</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">span</span> <span class="na">data-th-text</span><span class="o">=</span><span class="s">&quot;${ utilisateur?.nom }&quot;</span><span class="p">&gt;</span>le nom ici<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>La génération de la page n’échouera plus si l’objet <code class="docutils literal notranslate"><span class="pre">utilisateur</span></code> n’est pas
disponible. Le résultat de l’expression <code class="docutils literal notranslate"><span class="pre">utilisateur?.nom</span></code> sera simplement une
chaîne vide.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>L’opérateur de coalescence des valeurs nulles est utilisable à tous les
niveaux d’une expression :</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>${ utilisateur?.adresse?.ville?.toUppercase() }
</pre></div>
</div>
</div>
</div>
<div class="section" id="le-formatage-des-donnees">
<h2>Le formatage des données<a class="headerlink" href="#le-formatage-des-donnees" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les <a class="reference external" href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#appendix-b-expression-utility-objects">objets utilitaires</a> disponibles dans les expressions peuvent nous permettre
de formater les données à afficher. Par exemple, s’il existe un objet <code class="docutils literal notranslate"><span class="pre">maintenant</span></code>
dans le modèle de type <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html">Date</a>, nous pouvons utiliser l’objet utilitaire <code class="docutils literal notranslate"><span class="pre">#dates</span></code>
pour spécifier un formatage de cette date :</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>${ #dates.format(maintenant, &#39;dd MMMM YYYY&#39;) }
</pre></div>
</div>
<p>Cependant, il est généralement plus simple de définir un format pour
la données élémentaires (dates, nombres, booléen…) qui sera utilisé par défaut
lors du rendu des pages.</p>
<p>Une application Spring peut enregistrer des formateurs de données à son lancement.
Pour cela, il faut ajouter un <em>bean</em> de configuration dans le contexte de
l’application. Ce <em>bean</em> doit implémenter l’interface <a class="reference external" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurer.html">WebMvcConfigurer</a> et
implémenter la méthode <a class="reference external" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurer.html#addFormatters-org.springframework.format.FormatterRegistry-">addFormatters</a>.</p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">dev.gayerie</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.format.FormatterRegistry</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.format.number.NumberStyleFormatter</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.config.annotation.WebMvcConfigurer</span><span class="p">;</span>

<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PizzaSpringMvcConfigurer</span> <span class="kd">implements</span> <span class="n">WebMvcConfigurer</span> <span class="p">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addFormatters</span><span class="p">(</span><span class="n">FormatterRegistry</span> <span class="n">registry</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">registry</span><span class="p">.</span><span class="na">addFormatter</span><span class="p">(</span><span class="k">new</span> <span class="n">NumberStyleFormatter</span><span class="p">(</span><span class="s">&quot;#,##0.##&quot;</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Dans notre exemple ci-dessus, nous ajoutons une instance de <a class="reference external" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/format/number/NumberStyleFormatter.html">NumberStyleFormatter</a>
(une classe fournie par le Spring Framework) dans les formateurs Spring. Cette
classe utilise la classe Java standard <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/NumberFormat.html">NumberFormat</a> et nous pouvons passer
en paramètre le motif pour la mise en forme des nombres.</p>
<p>Nous pouvons activer le formatage par défaut en utilisant <code class="docutils literal notranslate"><span class="pre">${{...}}</span></code> (deux
paires d’accolades) plutôt que <code class="docutils literal notranslate"><span class="pre">${...}</span></code> pour l’évaluation de nos expressions.
Ainsi :</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">data-th-text</span><span class="o">=</span><span class="s">&quot;${{ 1024 * 1024 }}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">data-th-text</span><span class="o">=</span><span class="s">&quot;${{ T(java.lang.Math).PI }}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>produira :</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>1 048 576<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>3,14<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Alors que si nous utilisons une seule paire d’accolades dans nos expressions :</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">data-th-text</span><span class="o">=</span><span class="s">&quot;${ 1024 * 1024 }&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">data-th-text</span><span class="o">=</span><span class="s">&quot;${ T(java.lang.Math).PI }&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Le résultat sera :</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>1048576<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>3.141592653589793<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="spring_dao.html" class="btn btn-neutral float-right" title="Spring DAO" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="spring_mvc_apiweb.html" class="btn btn-neutral float-left" title="Les API Web avec Spring Web MVC" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
  <div  role="contentinfo">
    <p>
    Par David Gayerie
    - <script>!function(){function e(e){return e.replace(/[a-zA-Z]/g,function(e){return String.fromCharCode((e<="Z"?90:122)>=(e=e.charCodeAt(0)+13)?e:e-26)})}!function(e){document.write("<a href='mailto:"+e+"'>"+e+"</a>")}(e("qnivq@tnlrevr.qri"))}();</script>
    - <a class="reference external" href="https://gayerie.dev">https://gayerie.dev</a>
    </p>
    <p class="copyright">
      <a class="reference external image-reference" href="https://creativecommons.org/licenses/by-sa/3.0/fr/"><img alt="Licence Creative Commons" src="https://i.creativecommons.org/l/by-sa/3.0/fr/88x31.png" /></a>
      Cette œuvre est mise à disposition selon les termes de la <a class="reference external" href="https://creativecommons.org/licenses/by-sa/3.0/fr/">Licence Creative Commons Attribution</a> -  Partage dans les Mêmes Conditions 3.0 France
    </p>
  </div>


</footer>

        </div>

      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-99071053-2', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>